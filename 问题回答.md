# AI 角色扮演项目：战略规划与发展路线图

本文档旨在全面阐述 AI 角色扮演项目的核心战略、产品规划、技术架构及未来发展方向。

---

## 1. 项目愿景与战略

### 1.1. 目标用户

本项目主要面向三类核心用户群体：

1.  **情感陪伴与娱乐用户 (主要)**: 这是产品的核心目标用户。他们可能因孤独、社交压力或纯粹的娱乐需求，渴望一个随时可用、无评判且充满趣味的交流对象。
2.  **语言学习与教育用户 (次要)**: 希望通过与特定AI角色（如历史人物、文学角色）进行对话，在沉浸式环境中练习外语、学习知识或锻炼思辨能力的用户。
3.  **专业领域探索用户 (潜在)**: 包括作家、编剧、游戏设计师等创意工作者。他们可以利用本平台进行头脑风暴、寻找灵感或测试角色对话。

### 1.2. 核心痛点

*   **情感陪伴用户**:
    *   **孤独感**: 现实生活中缺少可靠的倾诉对象。
    *   **社交恐惧**: 害怕与真人交流时可能产生的负面反馈（评判、误解）。
    *   **即时性缺失**: 亲友无法做到 7x24 小时在线陪伴。
*   **语言学习用户**:
    *   **缺少练习环境**: 难以找到愿意持续进行外语对话的伙伴。
    *   **害怕犯错**: 在与真人交流时，因担心犯错而不敢开口。
    *   **趣味性不足**: 传统学习方式枯燥，难以坚持。

### 1.3. 用户故事

1.  **(情感陪伴)**: **作为一名** 经常独自在家的用户，**我想要** 选择一个性格风趣的AI伙伴进行持续的语音聊天，**以便** 在我感到无聊或孤独时，能有一个有趣的伴侣，让我感觉不那么孤单。
2.  **(语言学习)**: **作为一名** 英语学习者，**我想要** 和“莎士比亚”这个AI角色用英语进行对话，**以便** 我能在一个沉浸式的环境中练习我的口语和听力，并且不怕犯错。
3.  **(专业探索)**: **作为一名** 小说家，**我想要** 向“苏格拉底”这个AI角色描述我的故事大纲，并与他进行辩论，**以便** 我能发现自己故事中的逻辑漏洞，获得新的创作灵感。

---

## 2. 产品功能与开发规划

### 2.1. 功能优先级

我们将功能划分为三个优先级：

*   **P0 (核心功能 - 必须有)**
    *   用户注册与登录系统
    *   角色列表浏览与选择
    *   1对1文本聊天室
    *   1对1语音聊天（录音 -> 识别 -> LLM -> 合成）
    *   分角色的会话历史记录

*   **P1 (重要功能 - 应该有)**
    *   **角色的长期记忆**: 能记住对话关键信息，建立情感纽带。
    *   用户个人资料管理
    *   丰富的角色详情页（背景故事、技能介绍）

*   **P2 (扩展功能 - 可以有)**
    *   AI角色的“技能”系统（见第4节）
    *   用户自定义创建/分享角色 (UGC)
    *   多模态交互（如发送图片）
    *   个性化设置（聊天背景、主题等）

### 2.2. 本次开发阶段目标

本次开发的**核心目标**是**确保P0核心功能的稳定与可用性**，具体任务已基本完成：

1.  **修复核心功能**: 彻底解决用户认证、授权及文件上传等一系列后端Bug，确保语音和文本聊天流程完全通畅。
2.  **移除开发冗余**: 删除前端“模拟登录”等临时功能，使产品更接近真实上线状态。

---

## 3. 技术架构与选型

### 3.1. LLM 模型选型

*   **计划采纳**: **七牛云 (Qiniu) LLM**。
    *   此决策基于项目中的 `七牛云LLM接入说明.md` 和 `QiniuAiService.java` 代码。
*   **选型理由 (推测)**:
    *   **生态整合度高**: 七牛云提供对象存储、CDN、实时音视频等全套服务。语音文件的上传、存储、分发乃至未来的实时语音流，都可以在同一生态内完成，极大简化开发和运维。
    *   **成本与性能**: 相比OpenAI等国外模型，国内云服务商在定价和网络延迟上更具优势，对需要快速响应的语音场景至关重要。
    *   **本土化优势**: 模型对中文的理解和优化可能更出色。
    *   **开发便捷性**: 集成同一服务商的语音识别、LLM、语音合成等服务，API风格统一，技术支持更便捷。

### 3.2. 后端架构实现

*   **实现“长期记忆”**:
    *   **短期记忆**: 使用 **Redis** 缓存最近的对话上下文，设置较短过期时间（如30分钟），用于快速响应。
    *   **长期记忆**: 对话结束后，通过 **异步任务 (`@Async`)** 调用LLM提炼摘要，存入 **MySQL** 的 `character_memories` 表中。新对话开始时，将摘要注入Prompt。
    *   **Prompt结构**: `[角色设定] + [长期记忆摘要] + [短期记忆/最近对话] + [用户最新输入]`。

*   **实现“AI技能系统”**:
    *   采用 **“工具使用” (Tool Use) / “函数调用” (Function Calling)** 思路。
    *   在Prompt中向LLM描述可用技能及其格式（如 `[SKILL:SET_REMINDER, ...]`）。
    *   后端服务拦截并解析LLM回复中的技能标记，调用内部相应服务（如 `ReminderService`），并将执行结果交由LLM以自然语言形式反馈给用户。

### 3.3. 前端架构优化

*   **实时语音体验**:
    *   **未来方向**: 探索使用 **WebSocket** 和 **WebRTC** 技术，将当前“回合制”的语音交互升级为“实时通话”体验，极大提升沉浸感。

---

## 4. AI 角色技能扩展

除了基础的语音聊天，AI角色应具备以下高级技能以增强“角色扮演”的沉浸感和实用性：

1.  **长期记忆 (Long-term Memory)**: **(最高优先级)** 记住用户的关键信息（名字、偏好、重要事件），建立情感连接。
2.  **知识检索与问答 (Knowledge Retrieval & Q&A)**: 针对特定知识型角色，能调用知识库进行准确回答。
3.  **情感分析与反馈 (Emotional Analysis & Feedback)**: 感知用户情绪，并给出更具同理心的回应。
4.  **创意写作辅助 (Creative Writing Assistance)**: 成为用户的创意伙伴，进行写诗、构思情节等创作。
5.  **任务执行 (Task Execution)**: 执行轻量级任务，如设置提醒、查询天气等。
6.  **多模态生成 (Multi-modal Generation)**: (未来探索) 根据用户描述生成匹配的图片，丰富交互维度。

---

## 5. 商业模式与盈利策略

采用 **免费增值 (Freemium)** 模型。

### 5.1. 免费版 (Free Tier)

*   **目的**: 吸引海量用户，验证核心价值。
*   **限制**: 提供少量基础角色、每日消息数量限制、基础音色、可能包含非侵入式广告。

### 5.2. 付费订阅版 (Premium Tier)

*   **目的**: 主要收入来源，为核心用户提供无限制、高质量的深度体验。
*   **权益**:
    *   无限消息与无限语音时长。
    *   解锁所有高级角色和高级技能。
    *   享受更自然、更多样化的高质量语音。
    *   增强的长期记忆能力。
    *   完全无广告。

---

## 6. 项目发展路线图

### 第一阶段：核心体验打磨 (当前 - 3个月内)
*   **目标**: 确保P0核心功能的绝对稳定和流畅。
*   **任务**: 修复所有已知Bug、优化响应速度、进行UI/UX优化、上线MVP并邀请种子用户内测。

### 第二阶段：核心价值增强 (3 - 6个月)
*   **目标**: 引入能显著提升用户粘性的P1功能。
*   **任务**: **上线“长期记忆”功能**、丰富角色库（至少10个）、完善角色故事、根据内测反馈迭代产品。

### 第三阶段：生态与扩展 (6 - 12个月及以后)
*   **目标**: 探索P2功能，构建产品护城河。
*   **任务**: 上线初版“AI技能系统”、探索 **用户自定义角色 (UGC)** 功能、根据市场反馈和盈利情况规划未来战略。
