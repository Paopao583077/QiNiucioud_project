# é˜¿é‡Œäº‘è¯­éŸ³æœåŠ¡å®Œæ•´é…ç½®æ•™ç¨‹

## ğŸ¯ ç»Ÿä¸€ä½¿ç”¨é˜¿é‡Œäº‘è¯­éŸ³æœåŠ¡

é˜¿é‡Œäº‘æ™ºèƒ½è¯­éŸ³äº¤äº’åŒæ—¶æä¾›ï¼š
- **è¯­éŸ³è¯†åˆ«**ï¼ˆASRï¼‰ï¼šè¯­éŸ³è½¬æ–‡å­—
- **è¯­éŸ³åˆæˆ**ï¼ˆTTSï¼‰ï¼šæ–‡å­—è½¬è¯­éŸ³

## ğŸ“‹ é…ç½®æ­¥éª¤

### 1. æ³¨å†Œé˜¿é‡Œäº‘è´¦å·

1. è®¿é—®ï¼šhttps://www.aliyun.com/
2. ç‚¹å‡»"å…è´¹æ³¨å†Œ"
3. å®Œæˆè´¦å·æ³¨å†Œå’Œå®åè®¤è¯ï¼ˆå¿…é¡»ï¼‰

### 2. å¼€é€šæ™ºèƒ½è¯­éŸ³äº¤äº’æœåŠ¡

1. **æœç´¢æœåŠ¡**ï¼š
   - ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
   - æœç´¢"æ™ºèƒ½è¯­éŸ³äº¤äº’"
   - ç‚¹å‡»è¿›å…¥äº§å“é¡µé¢

2. **å¼€é€šæœåŠ¡**ï¼š
   - ç‚¹å‡»"ç«‹å³å¼€é€š"
   - é€‰æ‹©"æŒ‰é‡ä»˜è´¹"ï¼ˆæœ‰å…è´¹é¢åº¦ï¼‰
   - ç¡®è®¤å¼€é€š

### 3. åˆ›å»ºé¡¹ç›®å’Œè·å–AppKey

1. **è¿›å…¥æ§åˆ¶å°**ï¼šhttps://nls-portal.console.aliyun.com/
2. **åˆ›å»ºé¡¹ç›®**ï¼š
   - ç‚¹å‡»"åˆ›å»ºé¡¹ç›®"
   - é¡¹ç›®åç§°ï¼š`AIè§’è‰²æ‰®æ¼”è¯­éŸ³æœåŠ¡`
   - é¡¹ç›®æè¿°ï¼š`ç”¨äºAIè§’è‰²æ‰®æ¼”ç³»ç»Ÿçš„è¯­éŸ³è¯†åˆ«å’Œåˆæˆ`
   - ç‚¹å‡»"ç¡®å®š"
3. **è·å–AppKey**ï¼š
   - é¡¹ç›®åˆ›å»ºæˆåŠŸåï¼Œä¼šæ˜¾ç¤ºAppKey
   - å¤åˆ¶å¹¶ä¿å­˜AppKeyï¼ˆç±»ä¼¼ï¼š`nls-service-xxxxxxxxx`ï¼‰

### 4. è·å–AccessKey

1. **è¿›å…¥AccessKeyç®¡ç†**ï¼š
   - ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ AccessKeyç®¡ç†
   - æˆ–ç›´æ¥è®¿é—®ï¼šhttps://usercenter.console.aliyun.com/
2. **åˆ›å»ºAccessKey**ï¼š
   - ç‚¹å‡»"åˆ›å»ºAccessKey"
   - ç³»ç»Ÿä¼šç”ŸæˆAccessKey IDå’ŒAccessKey Secret
   - âš ï¸ **é‡è¦**ï¼šAccessKey Secretåªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·ç«‹å³å¤åˆ¶ä¿å­˜

### 5. é…ç½®åˆ°é¡¹ç›®ä¸­

```yaml
ai:
  speech:
    provider: aliyun  # ç»Ÿä¸€ä½¿ç”¨é˜¿é‡Œäº‘
    aliyun:
      access-key-id: LTAI4G6FMA7xxxxxxxxx      # ä½ çš„AccessKey ID
      access-key-secret: abc123def456ghi789jkl  # ä½ çš„AccessKey Secret
      app-key: nls-service-xxxxxxxxx            # ä½ çš„AppKey
```

### 6. å…è´¹é¢åº¦è¯´æ˜

**è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰**ï¼š
- å…è´¹é¢åº¦ï¼šæ¯æœˆ2å°æ—¶
- è¶…å‡ºåï¼š0.0008å…ƒ/ç§’

**è¯­éŸ³åˆæˆï¼ˆTTSï¼‰**ï¼š
- å…è´¹é¢åº¦ï¼šæ¯æœˆ500ä¸‡å­—ç¬¦
- è¶…å‡ºåï¼š0.0008å…ƒ/ç™¾å­—ç¬¦

**å¯¹äºå¼€å‘æµ‹è¯•å®Œå…¨å¤Ÿç”¨ï¼**

---

## ğŸ”§ ä¿®æ”¹SpeechServiceå®ç°

è®©æˆ‘ä¿®æ”¹SpeechServiceï¼Œç»Ÿä¸€ä½¿ç”¨é˜¿é‡Œäº‘ï¼š

```java
@Slf4j
@Service
public class SpeechService {
    
    @Value("${ai.speech.aliyun.access-key-id}")
    private String accessKeyId;
    
    @Value("${ai.speech.aliyun.access-key-secret}")
    private String accessKeySecret;
    
    @Value("${ai.speech.aliyun.app-key}")
    private String appKey;
    
    /**
     * é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«
     */
    public String speechToText(byte[] audioData) {
        try {
            // ä½¿ç”¨é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«API
            // å®é™…å®ç°éœ€è¦é›†æˆé˜¿é‡Œäº‘SDK
            log.info("ä½¿ç”¨é˜¿é‡Œäº‘è¿›è¡Œè¯­éŸ³è¯†åˆ«ï¼ŒéŸ³é¢‘å¤§å°: {} bytes", audioData.length);
            
            // TODO: é›†æˆé˜¿é‡Œäº‘ASR SDK
            return "è¿™æ˜¯è¯­éŸ³è¯†åˆ«çš„ç»“æœ"; // å ä½è¿”å›
        } catch (Exception e) {
            log.error("é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«å¼‚å¸¸", e);
            return null;
        }
    }
    
    /**
     * é˜¿é‡Œäº‘è¯­éŸ³åˆæˆ
     */
    public byte[] textToSpeech(String text, String voice) {
        try {
            // ä½¿ç”¨é˜¿é‡Œäº‘è¯­éŸ³åˆæˆAPI
            log.info("ä½¿ç”¨é˜¿é‡Œäº‘è¿›è¡Œè¯­éŸ³åˆæˆï¼Œæ–‡æœ¬: {}, éŸ³è‰²: {}", text, voice);
            
            // TODO: é›†æˆé˜¿é‡Œäº‘TTS SDK
            return new byte[0]; // å ä½è¿”å›
        } catch (Exception e) {
            log.error("é˜¿é‡Œäº‘è¯­éŸ³åˆæˆå¼‚å¸¸", e);
            return null;
        }
    }
}
```

---

## ğŸ“¦ æ·»åŠ é˜¿é‡Œäº‘SDKä¾èµ–

åœ¨pom.xmlä¸­æ·»åŠ é˜¿é‡Œäº‘è¯­éŸ³SDKï¼š

```xml
<!-- é˜¿é‡Œäº‘è¯­éŸ³æœåŠ¡SDK -->
<dependency>
    <groupId>com.aliyun</groupId>
    <artifactId>aliyun-java-sdk-core</artifactId>
    <version>4.6.3</version>
</dependency>
<dependency>
    <groupId>com.aliyun</groupId>
    <artifactId>aliyun-java-sdk-nls-cloud-meta</artifactId>
    <version>1.0.0</version>
</dependency>
```

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•é…ç½®

### 1. æ›´æ–°application.yml

```yaml
ai:
  speech:
    aliyun:
      access-key-id: ä½ çš„AccessKey_ID
      access-key-secret: ä½ çš„AccessKey_Secret  
      app-key: ä½ çš„AppKey
```

### 2. åˆ é™¤ç™¾åº¦ç›¸å…³é…ç½®

```yaml
ai:
  speech:
    # åˆ é™¤ç™¾åº¦é…ç½®
    # baidu:
    #   app-id: your-baidu-app-id
    #   api-key: your-baidu-api-key
    #   secret-key: your-baidu-secret-key
    
    aliyun:
      access-key-id: ä½ çš„é…ç½®
      access-key-secret: ä½ çš„é…ç½®
      app-key: ä½ çš„é…ç½®
```

### 3. æµ‹è¯•è¯­éŸ³æ¥å£

```bash
# æµ‹è¯•è¯­éŸ³åˆæˆ
curl -X POST "http://localhost:8080/api/speech/synthesis" \
  -H "Content-Type: application/json" \
  -d '{"text": "ä½ å¥½ï¼Œæˆ‘æ˜¯AIåŠ©æ‰‹", "voice": "xiaoyun"}'

# æµ‹è¯•æ”¯æŒçš„è¯­éŸ³åˆ—è¡¨
curl -X GET "http://localhost:8080/api/speech/voices"
```

---

## ğŸ”’ å®‰å…¨é…ç½®å»ºè®®

### ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```yaml
ai:
  speech:
    aliyun:
      access-key-id: ${ALIYUN_ACCESS_KEY_ID:your-default-access-key-id}
      access-key-secret: ${ALIYUN_ACCESS_KEY_SECRET:your-default-access-key-secret}
      app-key: ${ALIYUN_APP_KEY:your-default-app-key}
```

### è®¾ç½®ç¯å¢ƒå˜é‡

**Windows:**
```cmd
set ALIYUN_ACCESS_KEY_ID=ä½ çš„å®é™…AccessKey_ID
set ALIYUN_ACCESS_KEY_SECRET=ä½ çš„å®é™…AccessKey_Secret
set ALIYUN_APP_KEY=ä½ çš„å®é™…AppKey
```

---

## ğŸ“Š é˜¿é‡Œäº‘è¯­éŸ³æœåŠ¡ä¼˜åŠ¿

1. **æœåŠ¡ç¨³å®š**ï¼šé˜¿é‡Œäº‘åŸºç¡€è®¾æ–½å¯é 
2. **ä¸­æ–‡ä¼˜åŒ–**ï¼šå¯¹ä¸­æ–‡è¯­éŸ³å¤„ç†æ•ˆæœå¥½
3. **å…è´¹é¢åº¦å¤§**ï¼šTTSæ¯æœˆ500ä¸‡å­—ç¬¦å…è´¹
4. **ä¸€ç«™å¼æœåŠ¡**ï¼šASR + TTS ç»Ÿä¸€ç®¡ç†
5. **æ–‡æ¡£å®Œå–„**ï¼šä¸­æ–‡æ–‡æ¡£ï¼ŒæŠ€æœ¯æ”¯æŒå¥½

---

## â“ å¸¸è§é—®é¢˜

### Q: AccessKeyåœ¨å“ªé‡Œæ‰¾ï¼Ÿ
**A**: é˜¿é‡Œäº‘æ§åˆ¶å° â†’ å³ä¸Šè§’å¤´åƒ â†’ AccessKeyç®¡ç†

### Q: AppKeyåœ¨å“ªé‡Œæ‰¾ï¼Ÿ
**A**: æ™ºèƒ½è¯­éŸ³äº¤äº’æ§åˆ¶å° â†’ é¡¹ç›®ç®¡ç† â†’ æŸ¥çœ‹é¡¹ç›®è¯¦æƒ…

### Q: å…è´¹é¢åº¦å¤Ÿç”¨å—ï¼Ÿ
**A**: å¼€å‘æµ‹è¯•å®Œå…¨å¤Ÿç”¨ï¼ŒTTSæ¯æœˆ500ä¸‡å­—ç¬¦å¾ˆå……è¶³

### Q: å¦‚ä½•ç›‘æ§ä½¿ç”¨é‡ï¼Ÿ
**A**: æ™ºèƒ½è¯­éŸ³äº¤äº’æ§åˆ¶å°å¯ä»¥æŸ¥çœ‹è°ƒç”¨é‡å’Œè´¹ç”¨

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **æ³¨å†Œé˜¿é‡Œäº‘è´¦å·**ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
2. **å¼€é€šæ™ºèƒ½è¯­éŸ³äº¤äº’æœåŠ¡**
3. **åˆ›å»ºé¡¹ç›®è·å–AppKey**
4. **è·å–AccessKey**
5. **é…ç½®åˆ°application.yml**
6. **é‡å¯åº”ç”¨æµ‹è¯•**

éœ€è¦æˆ‘å¸®ä½ é…ç½®å“ªä¸€æ­¥ï¼Ÿæˆ–è€…æœ‰å…¶ä»–é—®é¢˜å—ï¼Ÿ